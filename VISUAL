--// SpeedHubX UI Script
--// Panels: Instructions -> Warning -> Loading -> Main Window

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- Utility function to make a screen GUI
local function createScreenGui(name)
    local gui = Instance.new("ScreenGui")
    gui.Name = name
    gui.ResetOnSpawn = false
    gui.Parent = PlayerGui
    return gui
end

-- Utility: Create draggable frame
local function makeDraggable(frame)
    local UserInputService = game:GetService("UserInputService")
    local dragging, dragInput, dragStart, startPos

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
                                       startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

-- Panel 1: Instructions
local instructionsGui = createScreenGui("InstructionsGui")
local frame = Instance.new("Frame", instructionsGui)
frame.Size = UDim2.new(0, 400, 0, 240)
frame.Position = UDim2.new(0.5, -200, 0.5, -120)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
makeDraggable(frame)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "Turn off all the following Delta settings, or the script will fail."
title.TextColor3 = Color3.fromRGB(255, 0, 0)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.TextWrapped = true

local instructions = Instance.new("TextLabel", frame)
instructions.Size = UDim2.new(1, -20, 0, 100)
instructions.Position = UDim2.new(0, 10, 0, 50)
instructions.BackgroundTransparency = 1
instructions.Text = "• Disable Anti-AFK\n• Disable Verify Teleport\n• Disable Anti-Scam\n\nAfter disabling, tick the box below then press Confirm."
instructions.TextColor3 = Color3.fromRGB(255, 255, 255)
instructions.Font = Enum.Font.SourceSans
instructions.TextSize = 16
instructions.TextWrapped = true
instructions.TextXAlignment = Enum.TextXAlignment.Left

local checkbox = Instance.new("TextButton", frame)
checkbox.Size = UDim2.new(0, 20, 0, 20)
checkbox.Position = UDim2.new(0, 10, 1, -40)
checkbox.Text = ""
checkbox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)

local confirm = Instance.new("TextButton", frame)
confirm.Size = UDim2.new(0, 100, 0, 30)
confirm.Position = UDim2.new(1, -110, 1, -40)
confirm.Text = "Confirm"
confirm.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
confirm.TextColor3 = Color3.fromRGB(200, 200, 200)
confirm.AutoButtonColor = false
confirm.Active = false

local checked = false
checkbox.MouseButton1Click:Connect(function()
    checked = not checked
    checkbox.BackgroundColor3 = checked and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(60, 60, 60)
    if checked then
        confirm.Active = true
        confirm.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    else
        confirm.Active = false
        confirm.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    end
end)

-- Panel 2: Warning popup
local function showWarning()
    local warningGui = createScreenGui("WarningGui")
    local warnFrame = Instance.new("Frame", warningGui)
    warnFrame.Size = UDim2.new(0, 400, 0, 160)
    warnFrame.Position = UDim2.new(0.5, -200, 0.5, -80)
    warnFrame.BackgroundColor3 = Color3.fromRGB(40, 0, 0)

    local warnText = Instance.new("TextLabel", warnFrame)
    warnText.Size = UDim2.new(1, -20, 1, -20)
    warnText.Position = UDim2.new(0, 10, 0, 10)
    warnText.BackgroundTransparency = 1
    warnText.TextWrapped = true
    warnText.TextColor3 = Color3.fromRGB(255, 100, 100)
    warnText.Font = Enum.Font.SourceSansBold
    warnText.TextSize = 18
    warnText.Text = "Your executor might still have Verify Teleport / Anti-Scam enabled. Please disable these. REJOIN for the script to take effect"
end

-- Panel 3: Loading GUI
local function showLoading(nextCallback)
    local loadingGui = createScreenGui("LoadingGui")
    local loadFrame = Instance.new("Frame", loadingGui)
    loadFrame.Size = UDim2.new(0, 300, 0, 120)
    loadFrame.Position = UDim2.new(0.5, -150, 0.5, -60)
    loadFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)

    local text = Instance.new("TextLabel", loadFrame)
    text.Size = UDim2.new(1, 0, 0, 40)
    text.BackgroundTransparency = 1
    text.Text = "Loading GAG Script"
    text.TextColor3 = Color3.fromRGB(255, 255, 255)
    text.Font = Enum.Font.SourceSansBold
    text.TextSize = 18

    local bar = Instance.new("Frame", loadFrame)
    bar.Size = UDim2.new(1, -40, 0, 20)
    bar.Position = UDim2.new(0, 20, 0, 60)
    bar.BackgroundColor3 = Color3.fromRGB(60, 60, 60)

    local fill = Instance.new("Frame", bar)
    fill.Size = UDim2.new(0, 0, 1, 0)
    fill.BackgroundColor3 = Color3.fromRGB(0, 200, 0)

    local percent = Instance.new("TextLabel", loadFrame)
    percent.Size = UDim2.new(1, 0, 0, 20)
    percent.Position = UDim2.new(0, 0, 1, -25)
    percent.BackgroundTransparency = 1
    percent.Text = "0%"
    percent.TextColor3 = Color3.fromRGB(255, 255, 255)
    percent.Font = Enum.Font.SourceSans
    percent.TextSize = 16

    local duration = 5
    for i = 0, duration * 10 do
        local progress = i / (duration * 10)
        fill.Size = UDim2.new(progress, 0, 1, 0)
        percent.Text = tostring(math.floor(progress * 100)) .. "%"
        task.wait(0.1)
    end

    loadingGui:Destroy()
    if nextCallback then nextCallback() end
end

-- Panel 4: Main Window UI
local function showMainWindow()
    local mainGui = createScreenGui("MainWindow")
    local mainFrame = Instance.new("Frame", mainGui)
    mainFrame.Size = UDim2.new(0, 500, 0, 300)
    mainFrame.Position = UDim2.new(0.5, -250, 0.5, -150)
    mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    makeDraggable(mainFrame)

    local title = Instance.new("TextLabel", mainFrame)
    title.Size = UDim2.new(1, 0, 0, 40)
    title.BackgroundTransparency = 1
    title.Text = "SpeedHubX - Auto Middle"
    title.TextColor3 = Color3.fromRGB(0, 200, 200)
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 20
end

-- Check logic
local function checksPass()
    -- Stubbed: Always false for now.
    -- You can hook actual executor checks here if Delta exposes APIs.
    return false
end

-- Confirm button click
confirm.MouseButton1Click:Connect(function()
    if not checked then return end
    instructionsGui:Destroy()
    if checksPass() then
        showLoading(showMainWindow)
    else
        showWarning()
    end
end)
